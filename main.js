/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t="".concat("","/api/weblarek"),r="".concat("","/content/weblarek");function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function isSelector(t){return"string"==typeof t&&t.length>1}function formatNumber(t){return null==t||isNaN(t)?"Бесценно":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" синапсов"}function ensureElement(t,r){if(isSelector(t)){var o=function ensureAllElements(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(r.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,r);if(o.length>1&&console.warn("selector ".concat(t," return more then one element")),0===o.length)throw new Error("selector ".concat(t," return nothing"));return o.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementData(t,r){for(var o in r)t.dataset[o]=String(r[o])}function createElement(t,r,o){var i,a,c=document.createElement(t);if(r)for(var u in r){var l=r[u];i=l,a=void 0,(a=Object.getPrototypeOf(i))!==Object.getPrototypeOf({})&&null!==a||"dataset"!==u?c[u]="boolean"==typeof l?l:String(l):setElementData(c,l)}if(o){var p,y=function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw c}}}}(Array.isArray(o)?o:[o]);try{for(y.s();!(p=y.n()).done;){var d=p.value;c.append(d)}}catch(t){y.e(t)}finally{y.f()}}return c}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===_typeof(c)?c:String(c)),i)}var a,c}var o=function(){function EventEmitter(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,r){var o;this._events.has(t)||this._events.set(t,new Set),null===(o=this._events.get(t))||void 0===o||o.add(r)}},{key:"off",value:function off(t,r){var o;this._events.has(t)&&(this._events.get(t).delete(r),0===(null===(o=this._events.get(t))||void 0===o?void 0:o.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,r){this._events.forEach((function(o,i){"*"===i&&o.forEach((function(o){return o({eventName:t,data:r})})),(i instanceof RegExp&&i.test(t)||i===t)&&o.forEach((function(t){return t(r)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,r){var o=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(t,Object.assign(Object.assign({},i||{}),r||{}))}}}]),EventEmitter}();function Component_typeof(t){return Component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Component_typeof(t)}function Component_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Component_toPrimitive(t,r){if("object"!==Component_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Component_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Component_typeof(c)?c:String(c)),i)}var a,c}var i=function(){function Component(t){!function Component_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function Component_createClass(t,r,o){return r&&Component_defineProperties(t.prototype,r),o&&Component_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"toggleClass",value:function toggleClass(t,r,o){t.classList.toggle(r,o)}},{key:"setText",value:function setText(t,r){t&&(t.textContent=String(r))}},{key:"setDisabled",value:function setDisabled(t,r){t&&(r?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))}},{key:"setHidden",value:function setHidden(t){t.style.display="none"}},{key:"setVisible",value:function setVisible(t){t.style.removeProperty("display")}},{key:"setImage",value:function setImage(t,r,o){t&&(t.src=r,o&&(t.alt=o))}},{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function Modal_typeof(t){return Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Modal_typeof(t)}function Modal_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Modal_toPrimitive(t,r){if("object"!==Modal_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Modal_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Modal_typeof(c)?c:String(c)),i)}var a,c}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},_get.apply(this,arguments)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===Modal_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}(this,o)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var a=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(Modal,t);var r=_createSuper(Modal);function Modal(t,o){var i;return function Modal_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Modal),(i=r.call(this,t)).events=o,i._closeButton=ensureElement(".modal__close",t),i._content=ensureElement(".modal__content",t),i._closeButton.addEventListener("click",i.close.bind(_assertThisInitialized(i))),i.container.addEventListener("click",i.close.bind(_assertThisInitialized(i))),i._content.addEventListener("click",(function(t){return t.stopPropagation()})),i}return function Modal_createClass(t,r,o){return r&&Modal_defineProperties(t.prototype,r),o&&Modal_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"open",value:function open(){this.container.classList.add("modal_active"),this.events.emit("modal:open")}},{key:"close",value:function close(){this.container.classList.remove("modal_active"),this.content=null,this.events.emit("modal:close")}},{key:"render",value:function render(t){return _get(_getPrototypeOf(Modal.prototype),"render",this).call(this,t),this.open(),this.container}}]),Modal}(i);function Model_typeof(t){return Model_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Model_typeof(t)}function Model_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Model_toPrimitive(t,r){if("object"!==Model_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Model_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Model_typeof(c)?c:String(c)),i)}var a,c}var c=function(){function Model(t,r){!function Model_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Model),this.events=r,Object.assign(this,t)}return function Model_createClass(t,r,o){return r&&Model_defineProperties(t.prototype,r),o&&Model_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Model,[{key:"emitChanges",value:function emitChanges(t,r){this.events.emit(t,null!=r?r:{})}}]),Model}();function ApplicationState_typeof(t){return ApplicationState_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ApplicationState_typeof(t)}function ApplicationState_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function ApplicationState_toPrimitive(t,r){if("object"!==ApplicationState_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==ApplicationState_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===ApplicationState_typeof(c)?c:String(c)),i)}var a,c}function ApplicationState_setPrototypeOf(t,r){return ApplicationState_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},ApplicationState_setPrototypeOf(t,r)}function ApplicationState_createSuper(t){var r=function ApplicationState_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=ApplicationState_getPrototypeOf(t);if(r){var a=ApplicationState_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function ApplicationState_possibleConstructorReturn(t,r){if(r&&("object"===ApplicationState_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function ApplicationState_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function ApplicationState_getPrototypeOf(t){return ApplicationState_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ApplicationState_getPrototypeOf(t)}var u=function(t){!function ApplicationState_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ApplicationState_setPrototypeOf(t,r)}(ApplicationState,t);var r=ApplicationState_createSuper(ApplicationState);function ApplicationState(){var t;return function ApplicationState_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ApplicationState),(t=r.apply(this,arguments)).productList=[],t.shoppingCart=[],t.currentOrder={payment:"online",email:"",phone:"",address:""},t.previewItemId=null,t.validationErrors={},t}return function ApplicationState_createClass(t,r,o){return r&&ApplicationState_defineProperties(t.prototype,r),o&&ApplicationState_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ApplicationState,[{key:"updateProductList",value:function updateProductList(t){this.productList=t,this.emitChanges("productList:updated",{products:this.productList})}},{key:"setProductPreview",value:function setProductPreview(t){this.previewItemId=t.id,this.emitChanges("productPreview:updated",{item:t})}},{key:"manageCartItem",value:function manageCartItem(t,r){"add"===r?this.shoppingCart.some((function(r){return r.id===t.id}))||this.shoppingCart.push(t):this.shoppingCart=this.shoppingCart.filter((function(r){return r.id!==t.id})),this.emitChanges("shoppingCart:updated",{cart:this.shoppingCart,count:this.shoppingCart.length})}},{key:"updateDeliveryInfo",value:function updateDeliveryInfo(t,r){this.currentOrder[t]=r,this.validateDelivery()&&this.emitChanges("deliveryInfo:updated",{order:this.currentOrder})}},{key:"updateContactInfo",value:function updateContactInfo(t,r){this.currentOrder[t]=r,this.validateContacts()&&this.emitChanges("contactInfo:updated",{order:this.currentOrder})}},{key:"clearCart",value:function clearCart(){this.shoppingCart=[],this.emitChanges("shoppingCart:updated",{cart:this.shoppingCart,count:0})}},{key:"getOrderData",value:function getOrderData(){return Object.assign(Object.assign({},this.currentOrder),{items:this.shoppingCart.map((function(t){return t.id})),total:this.getTotal()})}},{key:"getTotal",value:function getTotal(){return this.shoppingCart.reduce((function(t,r){return t+(r.price||0)}),0)}},{key:"validateDelivery",value:function validateDelivery(){var t={};return this.currentOrder.address||(t.address="Укажите адрес доставки"),this.validationErrors=t,this.events.emit("validationDelivery:errors",this.validationErrors),0===Object.keys(t).length}},{key:"validateContacts",value:function validateContacts(){var t={};return this.currentOrder.email||(t.email="Укажите email"),this.currentOrder.phone||(t.phone="Укажите телефон"),this.validationErrors=t,this.events.emit("validationContacts:errors",this.validationErrors),0===Object.keys(t).length}}]),ApplicationState}(c);function ShoppingCart_typeof(t){return ShoppingCart_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ShoppingCart_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return ShoppingCart_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function ShoppingCart_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return ShoppingCart_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return ShoppingCart_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ShoppingCart_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function ShoppingCart_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function ShoppingCart_toPrimitive(t,r){if("object"!==ShoppingCart_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==ShoppingCart_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===ShoppingCart_typeof(c)?c:String(c)),i)}var a,c}function ShoppingCart_setPrototypeOf(t,r){return ShoppingCart_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},ShoppingCart_setPrototypeOf(t,r)}function ShoppingCart_createSuper(t){var r=function ShoppingCart_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=ShoppingCart_getPrototypeOf(t);if(r){var a=ShoppingCart_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function ShoppingCart_possibleConstructorReturn(t,r){if(r&&("object"===ShoppingCart_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function ShoppingCart_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function ShoppingCart_getPrototypeOf(t){return ShoppingCart_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ShoppingCart_getPrototypeOf(t)}var l=function(t){!function ShoppingCart_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ShoppingCart_setPrototypeOf(t,r)}(ShoppingCart,t);var r=ShoppingCart_createSuper(ShoppingCart);function ShoppingCart(t,o){var i;return function ShoppingCart_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ShoppingCart),(i=r.call(this,t)).events=o,i.itemsContainer=ensureElement(".basket__list",i.container),i.sumElement=i.container.querySelector(".basket__price"),i.checkoutButton=i.container.querySelector(".basket__button"),i.checkoutButton&&i.checkoutButton.addEventListener("click",(function(){o.emit("checkout:initiate")})),i.items=[],i}return function ShoppingCart_createClass(t,r,o){return r&&ShoppingCart_defineProperties(t.prototype,r),o&&ShoppingCart_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ShoppingCart,[{key:"items",set:function set(t){var r;t.length?(t.forEach((function(t,r){var o=t.querySelector(".basket__item-index");o&&(o.textContent="".concat(r+1))})),(r=this.itemsContainer).replaceChildren.apply(r,_toConsumableArray(t))):this.itemsContainer.replaceChildren(createElement("p",{textContent:"В корзине нет товаров"}))}},{key:"selected",set:function set(t){this.setDisabled(this.checkoutButton,!t.length)}},{key:"sum",set:function set(t){this.setText(this.sumElement,formatNumber(t))}}]),ShoppingCart}(i);function ProductCard_typeof(t){return ProductCard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ProductCard_typeof(t)}function ProductCard_slicedToArray(t,r){return function ProductCard_arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function ProductCard_iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,a,c,u,l=[],p=!0,y=!1;try{if(c=(o=o.call(t)).next,0===r){if(Object(o)!==o)return;p=!1}else for(;!(p=(i=c.call(o)).done)&&(l.push(i.value),l.length!==r);p=!0);}catch(t){y=!0,a=t}finally{try{if(!p&&null!=o.return&&(u=o.return(),Object(u)!==u))return}finally{if(y)throw a}}return l}}(t,r)||ProductCard_unsupportedIterableToArray(t,r)||function ProductCard_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ProductCard_toConsumableArray(t){return function ProductCard_arrayWithoutHoles(t){if(Array.isArray(t))return ProductCard_arrayLikeToArray(t)}(t)||function ProductCard_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ProductCard_unsupportedIterableToArray(t)||function ProductCard_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ProductCard_unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return ProductCard_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ProductCard_arrayLikeToArray(t,r):void 0}}function ProductCard_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function ProductCard_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function ProductCard_toPrimitive(t,r){if("object"!==ProductCard_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==ProductCard_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===ProductCard_typeof(c)?c:String(c)),i)}var a,c}function ProductCard_setPrototypeOf(t,r){return ProductCard_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},ProductCard_setPrototypeOf(t,r)}function ProductCard_createSuper(t){var r=function ProductCard_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=ProductCard_getPrototypeOf(t);if(r){var a=ProductCard_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function ProductCard_possibleConstructorReturn(t,r){if(r&&("object"===ProductCard_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function ProductCard_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function ProductCard_getPrototypeOf(t){return ProductCard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ProductCard_getPrototypeOf(t)}var p={дополнительное:"card__category_additional","софт-скил":"card__category_soft","хард-скил":"card__category_hard",кнопка:"card__category_button",другое:"card__category_other"},y=function(t){!function ProductCard_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ProductCard_setPrototypeOf(t,r)}(ProductCard,t);var r=ProductCard_createSuper(ProductCard);function ProductCard(t,o){var i;return function ProductCard_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProductCard),(i=r.call(this,t))._category=t.querySelector(".card__category"),i._image=t.querySelector(".card__image"),i._title=ensureElement(".card__title",t),i._description=t.querySelector(".card__text"),i._price=ensureElement(".card__price",t),i._button=t.querySelector(".button"),(null==o?void 0:o.onClick)&&(i._button?i._button.addEventListener("click",o.onClick):t.addEventListener("click",o.onClick)),i}return function ProductCard_createClass(t,r,o){return r&&ProductCard_defineProperties(t.prototype,r),o&&ProductCard_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ProductCard,[{key:"id",set:function set(t){this.container.dataset.id=t}},{key:"title",set:function set(t){this.setText(this._title,t)}},{key:"image",set:function set(t){this.setImage(this._image,t,this.title)}},{key:"description",set:function set(t){var r=this;if(Array.isArray(t)){var o,i=t.map((function(t){var o=r._description.cloneNode();return o.textContent=t,o}));(o=this._description).replaceWith.apply(o,ProductCard_toConsumableArray(i))}else this.setText(this._description,t)}},{key:"button",set:function set(t){this.setText(this._button,t)}},{key:"price",set:function set(t){this.setText(this._price,formatNumber(t))}},{key:"category",set:function set(t){this.setText(this._category,t),this.toggleCategoryClass(t)}},{key:"toggleCategoryClass",value:function toggleCategoryClass(t){var r=this;Object.entries(p).forEach((function(o){var i=ProductCard_slicedToArray(o,2),a=i[0],c=i[1];r._category.classList.toggle(c,a===t)}))}},{key:"buttonText",set:function set(t){this._button&&(this._button.textContent=t)}},{key:"initCard",value:function initCard(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.id=t.id,this.title=t.title,this.image=t.image,this.price=t.price,this.category=t.category,r&&t.description&&(this.description=t.description),this}},{key:"updateCartButtonState",value:function updateCartButtonState(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._button.disabled=!0),this.buttonText=t?"Убрать из корзины":"В корзину"}}]),ProductCard}(i);function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function api_toPrimitive(t,r){if("object"!==api_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===api_typeof(c)?c:String(c)),i)}var a,c}function LarekApi_typeof(t){return LarekApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LarekApi_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,r,o){t[r]=o.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,o){return t[r]=o}}function wrap(t,r,o,a){var c=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(c.prototype),l=new Context(a||[]);return i(u,"_invoke",{value:makeInvokeMethod(t,o,l)}),u}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,c,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(values([])));h&&h!==r&&o.call(h,c)&&(y=h);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,a,c,u){var l=tryCatch(t[i],t,a);if("throw"!==l.type){var p=l.arg,y=p.value;return y&&"object"==LarekApi_typeof(y)&&o.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,c,u)}),(function(t){invoke("throw",t,c,u)})):r.resolve(y).then((function(t){p.value=t,c(p)}),(function(t){return invoke("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,o,r,i)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,o){var i="suspendedStart";return function(a,c){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw c;return doneResult()}for(o.method=a,o.arg=c;;){var u=o.delegate;if(u){var l=maybeInvokeDelegate(u,o);if(l){if(l===p)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===i)throw i="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i="executing";var y=tryCatch(t,r,o);if("normal"===y.type){if(i=o.done?"completed":"suspendedYield",y.arg===p)continue;return{value:y.arg,done:o.done}}"throw"===y.type&&(i="completed",o.method="throw",o.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var o=r.method,i=t.iterator[o];if(void 0===i)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var c=a.arg;return c?c.done?(r[t.resultName]=c.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function next(){for(;++i<t.length;)if(o.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(v,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,o,i,a,c){void 0===c&&(c=Promise);var u=new AsyncIterator(wrap(r,o,i,a),c);return t.isGeneratorFunction(o)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,c,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),o=[];for(var i in r)o.push(i);return o.reverse(),function next(){for(;o.length;){var t=o.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(o,i){return c.type="throw",c.arg=t,r.next=o,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=r&&r<=c.finallyLoc&&(c=null);var u=c?c.completion:{};return u.type=t,u.arg=r,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),p}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var i=o.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,o){return this.delegate={iterator:values(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=void 0),p}},t}function asyncGeneratorStep(t,r,o,i,a,c,u){try{var l=t[c](u),p=l.value}catch(t){return void o(t)}l.done?r(p):Promise.resolve(p).then(i,a)}function _asyncToGenerator(t){return function(){var r=this,o=arguments;return new Promise((function(i,a){var c=t.apply(r,o);function _next(t){asyncGeneratorStep(c,i,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(c,i,a,_next,_throw,"throw",t)}_next(void 0)}))}}function LarekApi_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function LarekApi_toPrimitive(t,r){if("object"!==LarekApi_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==LarekApi_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===LarekApi_typeof(c)?c:String(c)),i)}var a,c}function LarekApi_setPrototypeOf(t,r){return LarekApi_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},LarekApi_setPrototypeOf(t,r)}function LarekApi_createSuper(t){var r=function LarekApi_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=LarekApi_getPrototypeOf(t);if(r){var a=LarekApi_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function LarekApi_possibleConstructorReturn(t,r){if(r&&("object"===LarekApi_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function LarekApi_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function LarekApi_getPrototypeOf(t){return LarekApi_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},LarekApi_getPrototypeOf(t)}var d=function(t){!function LarekApi_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&LarekApi_setPrototypeOf(t,r)}(LarekApi,t);var r,o,i=LarekApi_createSuper(LarekApi);function LarekApi(t,r,o){var a;return function LarekApi_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LarekApi),(a=i.call(this,r,o)).cdnBaseUrl=t,a}return function LarekApi_createClass(t,r,o){return r&&LarekApi_defineProperties(t.prototype,r),o&&LarekApi_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(LarekApi,[{key:"fetchProductList",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var t;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get("/product");case 2:return t=r.sent,r.abrupt("return",this.processProductImages(t.items));case 4:case"end":return r.stop()}}),_callee,this)}))),function fetchProductList(){return o.apply(this,arguments)})},{key:"submitOrder",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.post("/order",t));case 1:case"end":return r.stop()}}),_callee2,this)}))),function submitOrder(t){return r.apply(this,arguments)})},{key:"processProductImages",value:function processProductImages(t){var r=this;return t.map((function(t){return Object.assign(Object.assign({},t),{image:"".concat(r.cdnBaseUrl).concat(t.image)})}))}}]),LarekApi}(function(){function Api(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(r=o.headers)&&void 0!==r?r:{})}}return function api_createClass(t,r,o){return r&&api_defineProperties(t.prototype,r),o&&api_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(r){var o;return Promise.reject(null!==(o=r.error)&&void 0!==o?o:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:o,body:JSON.stringify(r)})).then(this.handleResponse)}}]),Api}());function Form_typeof(t){return Form_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Form_typeof(t)}function Form_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Form_toPrimitive(t,r){if("object"!==Form_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Form_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Form_typeof(c)?c:String(c)),i)}var a,c}function Form_get(){return Form_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var i=function Form_superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=Form_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},Form_get.apply(this,arguments)}function Form_setPrototypeOf(t,r){return Form_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},Form_setPrototypeOf(t,r)}function Form_createSuper(t){var r=function Form_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=Form_getPrototypeOf(t);if(r){var a=Form_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function Form_possibleConstructorReturn(t,r){if(r&&("object"===Form_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function Form_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function Form_getPrototypeOf(t){return Form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Form_getPrototypeOf(t)}var __rest=function(t,r){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)r.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(o[i[a]]=t[i[a]])}return o},h=function(t){!function Form_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Form_setPrototypeOf(t,r)}(Form,t);var r=Form_createSuper(Form);function Form(t,o){var i;return function Form_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Form),(i=r.call(this,t)).container=t,i.events=o,i._submit=ensureElement("button[type=submit]",i.container),i._errors=ensureElement(".form__errors",i.container),i.container.addEventListener("input",(function(t){var r=t.target,o=r.name,a=r.value;i.onInputChange(o,a)})),i.container.addEventListener("submit",(function(t){t.preventDefault(),i.events.emit("".concat(i.container.name,":submit"))})),i}return function Form_createClass(t,r,o){return r&&Form_defineProperties(t.prototype,r),o&&Form_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Form,[{key:"onInputChange",value:function onInputChange(t,r){this.events.emit("".concat(this.container.name,".").concat(String(t),":change"),{field:t,value:r})}},{key:"valid",set:function set(t){this._submit.disabled=!t}},{key:"errors",set:function set(t){this.setText(this._errors,t)}},{key:"render",value:function render(t){var r=t.valid,o=t.errors,i=__rest(t,["valid","errors"]);return Form_get(Form_getPrototypeOf(Form.prototype),"render",this).call(this,{valid:r,errors:o}),Object.assign(this,i),this.container}}]),Form}(i);function OrdersContacts_typeof(t){return OrdersContacts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrdersContacts_typeof(t)}function OrdersContacts_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function OrdersContacts_toPrimitive(t,r){if("object"!==OrdersContacts_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==OrdersContacts_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===OrdersContacts_typeof(c)?c:String(c)),i)}var a,c}function OrdersContacts_setPrototypeOf(t,r){return OrdersContacts_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},OrdersContacts_setPrototypeOf(t,r)}function OrdersContacts_createSuper(t){var r=function OrdersContacts_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=OrdersContacts_getPrototypeOf(t);if(r){var a=OrdersContacts_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function OrdersContacts_possibleConstructorReturn(t,r){if(r&&("object"===OrdersContacts_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function OrdersContacts_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function OrdersContacts_getPrototypeOf(t){return OrdersContacts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},OrdersContacts_getPrototypeOf(t)}var v=function(t){!function OrdersContacts_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&OrdersContacts_setPrototypeOf(t,r)}(OrdersContacts,t);var r=OrdersContacts_createSuper(OrdersContacts);function OrdersContacts(t,o){return function OrdersContacts_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrdersContacts),r.call(this,t,o)}return function OrdersContacts_createClass(t,r,o){return r&&OrdersContacts_defineProperties(t.prototype,r),o&&OrdersContacts_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrdersContacts,[{key:"phone",set:function set(t){this.setInputValue("phone",t)}},{key:"email",set:function set(t){this.setInputValue("email",t)}},{key:"setInputValue",value:function setInputValue(t,r){var o=this.container.elements.namedItem(t);o&&(o.value=r)}}]),OrdersContacts}(h);function OrdersDelivery_typeof(t){return OrdersDelivery_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrdersDelivery_typeof(t)}function OrdersDelivery_slicedToArray(t,r){return function OrdersDelivery_arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function OrdersDelivery_iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i,a,c,u,l=[],p=!0,y=!1;try{if(c=(o=o.call(t)).next,0===r){if(Object(o)!==o)return;p=!1}else for(;!(p=(i=c.call(o)).done)&&(l.push(i.value),l.length!==r);p=!0);}catch(t){y=!0,a=t}finally{try{if(!p&&null!=o.return&&(u=o.return(),Object(u)!==u))return}finally{if(y)throw a}}return l}}(t,r)||function OrdersDelivery_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return OrdersDelivery_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return OrdersDelivery_arrayLikeToArray(t,r)}(t,r)||function OrdersDelivery_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OrdersDelivery_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function OrdersDelivery_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function OrdersDelivery_toPrimitive(t,r){if("object"!==OrdersDelivery_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==OrdersDelivery_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===OrdersDelivery_typeof(c)?c:String(c)),i)}var a,c}function OrdersDelivery_setPrototypeOf(t,r){return OrdersDelivery_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},OrdersDelivery_setPrototypeOf(t,r)}function OrdersDelivery_createSuper(t){var r=function OrdersDelivery_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=OrdersDelivery_getPrototypeOf(t);if(r){var a=OrdersDelivery_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function OrdersDelivery_possibleConstructorReturn(t,r){if(r&&("object"===OrdersDelivery_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function OrdersDelivery_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function OrdersDelivery_getPrototypeOf(t){return OrdersDelivery_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},OrdersDelivery_getPrototypeOf(t)}var m=function(t){!function OrdersDelivery_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&OrdersDelivery_setPrototypeOf(t,r)}(OrdersDelivery,t);var r=OrdersDelivery_createSuper(OrdersDelivery);function OrdersDelivery(t,o){var i;return function OrdersDelivery_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrdersDelivery),(i=r.call(this,t,o)).paymentButtons={card:ensureElement('[name="card"]',t),cash:ensureElement('[name="cash"]',t)},i.togglePaymentMethod("card"),i.setupPaymentButtons(),i}return function OrdersDelivery_createClass(t,r,o){return r&&OrdersDelivery_defineProperties(t.prototype,r),o&&OrdersDelivery_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrdersDelivery,[{key:"address",set:function set(t){this.setInputValue("address",t)}},{key:"payment",set:function set(t){this.togglePaymentMethod(t)}},{key:"togglePaymentMethod",value:function togglePaymentMethod(t){Object.entries(this.paymentButtons).forEach((function(r){var o=OrdersDelivery_slicedToArray(r,2),i=o[0];o[1].classList.toggle("button_alt-active",i===t)}))}},{key:"setupPaymentButtons",value:function setupPaymentButtons(){var t=this;Object.entries(this.paymentButtons).forEach((function(r){var o=OrdersDelivery_slicedToArray(r,2),i=o[0];o[1].addEventListener("click",(function(r){r.preventDefault(),t.togglePaymentMethod(i),t.events.emit("payment:changed",{method:i})}))}))}},{key:"setInputValue",value:function setInputValue(t,r){var o=this.container.elements.namedItem(t);o&&(o.value=r)}}]),OrdersDelivery}(h);function Page_typeof(t){return Page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Page_typeof(t)}function Page_toConsumableArray(t){return function Page_arrayWithoutHoles(t){if(Array.isArray(t))return Page_arrayLikeToArray(t)}(t)||function Page_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Page_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return Page_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Page_arrayLikeToArray(t,r)}(t)||function Page_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Page_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function Page_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Page_toPrimitive(t,r){if("object"!==Page_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Page_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Page_typeof(c)?c:String(c)),i)}var a,c}function Page_setPrototypeOf(t,r){return Page_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},Page_setPrototypeOf(t,r)}function Page_createSuper(t){var r=function Page_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=Page_getPrototypeOf(t);if(r){var a=Page_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function Page_possibleConstructorReturn(t,r){if(r&&("object"===Page_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function Page_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function Page_getPrototypeOf(t){return Page_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Page_getPrototypeOf(t)}var b=function(t){!function Page_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Page_setPrototypeOf(t,r)}(Page,t);var r=Page_createSuper(Page);function Page(t,o){var i;return function Page_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Page),(i=r.call(this,t)).events=o,i.elements={counter:ensureElement(".header__basket-counter"),catalog:ensureElement(".gallery"),wrapper:ensureElement(".page__wrapper"),basket:ensureElement(".header__basket")},i.elements.basket.addEventListener("click",(function(){o.emit("basket:open")})),i}return function Page_createClass(t,r,o){return r&&Page_defineProperties(t.prototype,r),o&&Page_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Page,[{key:"counter",set:function set(t){this.setText(this.elements.counter,String(t))}},{key:"catalog",set:function set(t){var r;(r=this.elements.catalog).replaceChildren.apply(r,Page_toConsumableArray(t))}},{key:"locked",set:function set(t){this.toggleClass(this.elements.wrapper,"page__wrapper_locked",t)}}]),Page}(i);function Success_typeof(t){return Success_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Success_typeof(t)}function Success_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function Success_toPrimitive(t,r){if("object"!==Success_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Success_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Success_typeof(c)?c:String(c)),i)}var a,c}function Success_setPrototypeOf(t,r){return Success_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},Success_setPrototypeOf(t,r)}function Success_createSuper(t){var r=function Success_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=Success_getPrototypeOf(t);if(r){var a=Success_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function Success_possibleConstructorReturn(t,r){if(r&&("object"===Success_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function Success_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function Success_getPrototypeOf(t){return Success_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Success_getPrototypeOf(t)}var _=function(t){!function Success_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Success_setPrototypeOf(t,r)}(Success,t);var r=Success_createSuper(Success);function Success(t,o){var i;return function Success_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Success),(i=r.call(this,t)).elements={closeButton:ensureElement(".order-success__close",t),description:ensureElement(".order-success__description",t)},(null==o?void 0:o.onClick)&&i.elements.closeButton.addEventListener("click",o.onClick),i}return function Success_createClass(t,r,o){return r&&Success_defineProperties(t.prototype,r),o&&Success_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Success,[{key:"total",set:function set(t){this.setText(this.elements.description,"Списано ".concat(formatNumber(t)))}}]),Success}(i),g=new o,P=new d(r,t);g.onAll((function(t){var r=t.eventName,o=t.data;console.log(r,o)}));var O=ensureElement("#card-catalog"),C=ensureElement("#card-preview"),S=ensureElement("#basket"),w=ensureElement("#card-basket"),k=ensureElement("#order"),j=ensureElement("#contacts"),A=ensureElement("#success"),E=new u({},g),T=new b(document.body,g),L=new a(ensureElement("#modal-container"),g),I=new l(cloneTemplate(S),g),R=new m(cloneTemplate(k),g),x=new v(cloneTemplate(j),g),D=new _(cloneTemplate(A),{onClick:function onClick(){return L.close()}});g.on("productList:updated",(function(){T.catalog=E.productList.map((function(t){var r=new y(cloneTemplate(O),{onClick:function onClick(){return g.emit("card:select",t)}});return g.on("shoppingCart:updated",(function(){var o=E.shoppingCart.some((function(r){return r.id===t.id}));r.updateCartButtonState(o)})),r.initCard(t),r.render()}))})),g.on("productPreview:updated",(function(t){var r=t.item,o=E.shoppingCart.some((function(t){return t.id===r.id})),i=new y(cloneTemplate(C),{onClick:function onClick(){return g.emit("item:check",r)}});g.on("shoppingCart:updated",(function(){var t=E.shoppingCart.some((function(t){return t.id===r.id}));i.updateCartButtonState(t)})),null===r.price?i.initCard(r,!0).updateCartButtonState(o,!0):i.initCard(r,!0).updateCartButtonState(o),L.render({content:i.render()})})),g.on("card:select",(function(t){E.setProductPreview(t)})),g.on("item:check",(function(t){var r=E.shoppingCart.some((function(r){return r.id===t.id}));E.manageCartItem(t,r?"remove":"add")})),g.on("shoppingCart:updated",(function(t){var r=t.cart,o=t.count,i=r.map((function(t){return new y(cloneTemplate(w),{onClick:function onClick(){return E.manageCartItem(t,"remove")}}).render({title:t.title,price:t.price})}));I.items=i,I.sum=E.getTotal(),I.selected=r.map((function(t){return t.id})),T.counter=o})),g.on("basket:open",(function(){L.render({content:I.render()})})),g.on("checkout:initiate",(function(){E.currentOrder={payment:"",email:"",phone:"",address:""},L.render({content:R.render({payment:"",address:"",valid:!1,errors:[]})})})),g.on("payment:changed",(function(t){E.currentOrder.payment=t.method,R.payment=t.method})),g.on(/^order\..*:change/,(function(t){E.updateDeliveryInfo(t.field,t.value),E.validateDelivery()})),g.on("validationDelivery:errors",(function(t){var r=t.address,o=t.payment;R.valid=!r&&!o,R.errors=Object.values({address:r,payment:o}).filter(Boolean).join("; ")})),g.on("deliveryInfo:updated",(function(){R.valid=!0})),g.on("order:submit",(function(){L.render({content:x.render({email:"",phone:"",valid:!1,errors:[]})})})),g.on(/^contacts\..*:change/,(function(t){E.updateContactInfo(t.field,t.value),E.validateContacts()})),g.on("validationContacts:errors",(function(t){var r=t.email,o=t.phone;x.valid=!r&&!o,x.errors=Object.values({email:r,phone:o}).filter(Boolean).join("; ")})),g.on("contactInfo:updated",(function(){x.valid=!0})),g.on("contacts:submit",(function(){var t=E.getOrderData();P.submitOrder(t).then((function(t){E.clearCart(),L.render({content:D.render({total:t.total})})})).catch(console.error)})),g.on("modal:open",(function(){T.locked=!0})),g.on("modal:close",(function(){T.locked=!1})),P.fetchProductList().then(E.updateProductList.bind(E)).catch(console.error)})();
//# sourceMappingURL=main.js.map